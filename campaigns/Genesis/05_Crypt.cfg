#textdomain wesnoth-Genesis
[scenario]
    id=05_Crypt
    name= _ "Crypt"
    map_data="{~add-ons/Genesis/episode1/maps/05_Crypt.map}"
    next_scenario=06_Caerleon
    victory_when_enemies_defeated=no
    {TURNS 50 45 40}
    {UNDERGROUND}
    {STORYTXT_CRYPT}

    {FAE_DEATHS2}
    {SCENARIO_MUSIC suspense.ogg}
    {EXTRA_SCENARIO_MUSIC siege_of_laurelmor.ogg}
    {EXTRA_SCENARIO_MUSIC heroes_rite.ogg}
    {EXTRA_SCENARIO_MUSIC underground.ogg}
    {EXTRA_SCENARIO_MUSIC weight_of_revenge.ogg}

    [side]
        {PLAYER_FAE}
        side=1
        recruit=
        {GOLD 150 120 90}
        fog=yes
        shroud=yes
    [/side]
    {STARTING_VILLAGES_ALL 1}
    [side]
        {YUURE_SIDE}
        {AGGRESSIVE_SIDE}
        side=2
        hidden=yes
    [/side]
    [side]
        {BLACK_DEMON_SIDE}
        {AGGRESSIVE_SIDE}
        side=3
        hidden=yes
    [/side]
    [side]
        {ETHEA_ENEMY_SIDE}
        {AGGRESSIVE_SIDE}
        side=4
        no_leader=yes
        income=5
#ifdef EASY
        recruit=Winged Demon,Demon,Red Demon,Imp
#else
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
#endif
        hidden=yes
    [/side]
    [side]
        {ETHEA_ENEMY_SIDE}
        {AGGRESSIVE_SIDE}
        side=5
        no_leader=yes
        income=5
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
        hidden=yes
    [/side]
    [side]
        {ETHEA_ENEMY_SIDE}
        {AGGRESSIVE_SIDE}
        side=6
        no_leader=yes
        income=5
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
        hidden=yes
    [/side]
    [side]
        {ETHEA_ENEMY_SIDE}
        {AGGRESSIVE_SIDE}
        side=7
        no_leader=yes
        income=5
#ifdef EASY
        recruit=Winged Demon,Demon,Red Demon,Imp
#else
        recruit=Fire Demon,Demon Grunt,Demon Zephyr,Demon Sword Dancer,Blood Imp
#endif
        hidden=yes
    [/side]
    [side]
        {ETHEA_ENEMY_SIDE}
        {AGGRESSIVE_SIDE}
        side=8
        no_leader=yes
        income=5
        recruit=Winged Demon,Demon,Red Demon,Imp
        hidden=yes
    [/side]
    [side]
        side=9
        no_leader=yes
        team_name=fae
        controller=ai
        color=green
        hidden=yes
        user_team_name= _ "team_name^Guardians"
    [/side]

#define GENERATE_FUNGUS
    [store_locations]
        variable=cave_hex
        terrain=Uu*
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..24
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Uf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Emf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uu*
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..40
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Uf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Emf
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=3
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Em
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=4
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Em
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=5
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        layer=overlay
                        terrain=*^Es
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}

    # we can do this for cave hills too, for a bit of visual variety
    [store_locations]
        variable=cave_hill_hex
        terrain=Uh
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hill_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hill_hex[$i].x,$cave_hill_hex[$i].y
                        terrain=Uh^Uf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hill_hex}
    [store_locations]
        variable=cave_hill_hex
        terrain=Uh
        [filter_adjacent_location]
            terrain=Uue^Uf
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hill_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hill_hex[$i].x,$cave_hill_hex[$i].y
                        terrain=Uh^Uf
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hill_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uu*,Uh
        [filter_adjacent_location]
            terrain=*^Uf
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..9
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Emf
                        layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=2
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Em
                        layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=3
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Em
                        layer=overlay
                    [/terrain]
                [/then]
            [/if]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=4
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=*^Es
                        layer=overlay
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef

#define GENERATE_CAVE_HILL
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Xu,Xuc,Xue,Xuce
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..9
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [not]
            [filter_adjacent_location]
                terrain=Xu,Xuc,Xue,Xuce,Wwg
            [/filter_adjacent_location]
        [/not]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..18
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Uh
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..8
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uh
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
#enddef

#define GENERATE_CAVE_PATH
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [not]
            [filter_adjacent_location]
                terrain=Ur
            [/filter_adjacent_location]
        [/not]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..10
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Ur
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Ur
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..3
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                         x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Ur
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef

#define GENERATE_CAVE
    [store_locations]
        variable=cave_hex
        terrain=Uue
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..6
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uu
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
    [store_locations]
        variable=cave_hex
        terrain=Uue
        [filter_adjacent_location]
            terrain=Uu
        [/filter_adjacent_location]
    [/store_locations]
    [for]
        array=cave_hex
        [do]
            [set_variable]
                name=change_terrain
                rand=1..3
            [/set_variable]
            [if]
                [variable]
                    name=change_terrain
                    numerical_equals=1
                [/variable]
                [then]
                    [terrain]
                        x,y=$cave_hex[$i].x,$cave_hex[$i].y
                        terrain=Uu
                    [/terrain]
                [/then]
            [/if]
            {CLEAR_VARIABLE change_terrain}
        [/do]
    [/for]
    {CLEAR_VARIABLE cave_hex}
#enddef


    #ifdef HARD
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 7 31 2 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 12 36 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 13 32 2 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 2 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 14 27 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 2 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 18 24 3 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 10 4 7 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 14 4 6 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 18 4 7 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 22 4 6 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 25 4 7 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 6 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 33 4 7 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 6 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 38 5 7 ("black_spawns")}
    #endif
    #ifdef NORMAL
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 7 31 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 12 36 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 13 32 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 14 27 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 18 24 4 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 10 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 14 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 18 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 22 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 25 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 33 4 9 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 38 5 9 ("black_spawns")}
    #endif
    #ifdef EASY
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 7 31 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 12 36 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 13 32 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 10 29 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 17 30 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Blue Demon") 2 14 27 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 20 26 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Apparition","Demon Dreamwalker") 2 18 24 6 ("blue_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 10 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 14 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 18 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 22 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 25 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 29 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 33 4 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Demon Voidhunter","Demon Voidreaver") 3 36 3 12 ("black_spawns")}
        {RESPAWN_POINT_CONDITIONAL ("Black Demon") 3 38 5 12 ("black_spawns")}
    #endif

    {PLACE_IMAGE items/crystal-glyph-message.png 8 24}
    {PLACE_IMAGE items/crystal-glyph-message.png 3 21}
    {PLACE_IMAGE items/crystal-glyph-message.png 3 23}
    {PLACE_IMAGE items/crystal-glyph-message.png 13 21}
    {PLACE_IMAGE items/crystal-glyph-message.png 13 23}
    {PLACE_IMAGE items/book3.png 9 26}
    {PLACE_IMAGE items/book3.png 35 11}

    [event]
        name=prestart
        {GENERATE_CAVE_HILL}
        {GENERATE_CAVE_HILL}
        {GENERATE_FUNGUS}
        {GENERATE_CAVE_PATH}
        {GENERATE_CAVE}
        {GENERATE_FUNGUS}
        {RECALL_YUMI_NOLOC}
        {RECALL_ARYEL_NOLOC}

        [set_recruit]
            side=1
            recruit=Spearman,Bowman,Ghost,Skeleton,Skeleton Archer
        [/set_recruit]
        [set_variable]
            name=blue_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=black_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=door_open
            value=0
        [/set_variable]
        [set_variable]
            name=puzzle_done
            value=0
        [/set_variable]
        [set_variable]
            name=wall_open
            value=0
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=0
        [/set_variable]
    [/event]

    [event]
        name=start
        [message]
            speaker=Esther
            message= _ "So, here we are. Another cave."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Hey, some of us like caves."
        [/message]
        [message]
            speaker=Esther
            message= _ "That's because you're basically a troglodyte."
        [/message]
        [message]
            speaker=Aryel
            message= _ "But am I a pretty troglodyte?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Errmmm, sure. Haha, a beautiful troglodyte."
        [/message]
        [message]
            speaker=Aryel
            message= _ "I'll take it."
        [/message]
        [unit]
            type=Royal Guard
            id=guardsman
            x,y=7,46
            animate=yes
            side=1
        [/unit]

        [message]
            speaker=guardsman
            message= _ "Whew! Finally caught up. The captain ordered us to accompany you into the crypt. For everyone's safety, as you can guess."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>bites lip</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "<i>Clearly they don't trust us.</i> Sure, come right along."
        [/message]
        [message]
            speaker=guardsman
            message= _ "One more thing, we are all curious... why the interest in this crypt now? No other faerie has inquired about it prior to you. Did you, perhaps, discover a secret about it?"
        [/message]
        [message]
            speaker=Esther
            message= _ "No, no, nothing like that. While visiting a while ago, we just happened to notice a powerful magic emanating from within. We thought that it would be good if we investigated what was inside. You know, powerful unknown magics and all that - they can be kind of dangerous."
        [/message]
        [message]
            speaker=guardsman
            message= _ "What kind of unknown magics?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Something odd. Partly of faerie work, partly of something else. <i>Demon sorcery, of course.</i>"
        [/message]
        [message]
            speaker=guardsman
            message= _ "Odd magic, huh. As odd as summoning undead creatures?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Haha, you know about that?"
        [/message]
        [message]
            speaker=guardsman
            message= _ "Yes, well, our mages are technically allowed to practice it, but they are asked to keep it to within the guilds. For a faerie, though... well I've never heard of one with an affinity for the dead. It just seems so different than the usual elements you all work with."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>pales</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Ah, a common misconception. Think about it this way. It's a lot about the flow of energy in living beings. Sometimes, you can sense when a fresh soul has been lost and longs to take definite form once again. Or sometimes, one stumbles upon empty bodies, rotten flesh rife with death and decay. In whichever case, I can breathe a little life back into the dead form, allowing it a sense of stability once again."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) But mostly I just do it for fun. (<i>grins</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>rolls eyes</i>)"
        [/message]
        [message]
            speaker=guardsman
            message= _ "I just hope that it is not a corrupting influence."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Like any other magic, it only is if you let it be."
        [/message]
        [message]
            speaker=Esther
            message= _ "Like the magic we intend to investigate in here. Shall we stop stalling and get going?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sure."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Open the door to the crypt")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=6,42
            side=1
            [and]
                [not]
                    id=Aryel,Esther,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "I can't open this."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Esther
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "Aryel? We need you."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "(<i>looks at Aryel</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=6
            y=42
            side=1
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=door_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "Give me a moment and I'll have this open."
        [/message]
        {DELAY 550}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        [terrain]
            x,y=6,41
            terrain=Uue
        [/terrain]
        [terrain]
            x,y=6,42
            terrain=Brym
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]
        {DELAY 450}
        [message]
            speaker=Aryel
            message= _ "Alright, there. There's definitely something inside, so we should be careful."
        [/message]
        [message]
            speaker=Esther
            message= _ "Something like what?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Demons.</i> I'm not entirely sure. Just be on your toes."
        [/message]

        {SPAWN ("Demon Apparition") 2 7 33}
        [set_variable]
            name=blue_spawns
            value=1
        [/set_variable]
        [set_variable]
            name=door_open
            value=1
        [/set_variable]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Explore")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=sighted
        first_time_only=yes
        [filter]
            side=2
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [message]
            speaker=guardsman
            message= _ "Demons! We're being invaded!"
        [/message]
        [message]
            speaker=Esther
            message= _ "Stay calm! There's not that many of them and they don't seem very aggressive. It looks like they're searching for something. <i>And what kind of demons are these? I've never seen anything like this before...</i>"
        [/message]
        [message]
            speaker=guardsman
            message= _ "Are you sure?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>glances at Esther</i>) Yes, are you sure?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shifts nervously</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "I'm pretty sure. Either way, we can handle them. (<i>looks at Aryel</i>) <i>For now, we don't need to tell the humans too much. We don't want them to panic.</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>looks back</i>) <i>That's fine, but what are these things? They feel only vaguely demonic, nothing like the Urdemons we've been fighting.</i> The demons are more prone to attacking us faerie anyway, so they probably aren't here for you."
        [/message]
        [message]
            speaker=guardsman
            message= _ "But shouldn't we still be worried? If this is only the vanguard and there is a demon army at the ready-"
        [/message]
        [message]
            speaker=Esther
            message= _ "Don't jump to conclusions. Raising your alarms right now is unnecessary. Just have a messenger on standby or something in the event that there really is trouble."
        [/message]
        [message]
            speaker=guardsman
            message= _ "Then it's up to us to fight them for now."
        [/message]
        [message]
            speaker=Aryel
            message= _ "So it seems... (<i>looks at Yumi</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>stares blankly</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>She's frightened for some reason...</i>"
        [/message]
    [/event]

    [event]
        name=attack
        first_time_only=yes
        [filter]
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_second]
            side=2
        [/filter_second]
        [kill]
            x,y=$x2,$y2
        [/kill]

        [message]
            speaker=unit
            message= _ "What in the world? As soon as I attacked, it just disappeared."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yes, something's not quite right..."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Hmm, does she recognize these things? What is she hiding?</i>"
        [/message]
    [/event]

    [event]
        name=new turn
        first_time_only=no
        [store_unit]
            [filter]
                side=2
            [/filter]
            variable=bluedemons
        [/store_unit]
        [for]
            array=bluedemons
            [do]
                [set_variable]
                    name=kill_unit
                    rand=1..5
                [/set_variable]
                [if]
                    [variable]
                        name=kill_unit
                        numerical_equals=1
                    [/variable]
                    [then]
                        [kill]
                            x,y=$bluedemons[$i].x,$bluedemons[$i].y
                        [/kill]
                    [/then]
                [/if]
                {CLEAR_VARIABLE kill_unit}
            [/do]
        [/for]
        {CLEAR_VARIABLE bluedemons}
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x,y=9,26
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>To bridge the chasm, one requires the element of stability. Binding life first demands the flesh - all energies require a conduit. Matter is the starting point that shelters all of creation and is the medium that allows life to grow and prosper.</i>"
        [/message]
        {DELAY 750}
        [terrain]
            x,y=7-9,25
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 450}
        [message]
            speaker=Esther
            message= _ "Hmm. There are some glyphs in the next room. I guess we'll have to activate them in the correct order before we can proceed."
        [/message]
        [message]
            speaker=Aryel
            message= _ "A puzzle? I have to use my brain? Boring."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>snorts</i>) If you want to fight so badly, you could always go back there and fight those demons, you big brute."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Sure, I'll go do that."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>rolls eyes</i>)"
        [/message]
        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Activate the glyphs in the correct order")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=3,21
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>E - Existence was birthed when Yarae and the remaining First Gods utilized 'creation' to make the living worlds as we know them. Most of these First Gods faded into obscurity, but Yarae remained to watch over the Guardians and aid them in maintaining stability.

However, the passage of time has reduced the Arcane Lord's influence and the Guardians of the new worlds are interested only in what benefits themselves. We have strayed from our original purpose and are the facilitators of war.</i>"
        [/message]

        [set_variable]
            name=glyph_counter
            value=1
        [/set_variable]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=8,24
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>A - Areza, the world designated as that of Fire, was the only world whose creation was unsuccessful. In a catastrophic failure of unimaginable proportions, Areza was destroyed and the seed of Fire dropped to Norsula, the world of Water. The Guardians of these two elements are Valdir of Water, and Shardia of Fire, existing as two antithetical forces on the same world.

The result is a chaotic, unstable realm - a belligerent, bloodthirsty beast, Valdir often antagonizes Shardia, who embodies love and warmth. We on Iryda, the world of Earth, align ourselves with Shardia as messengers of peace.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=1
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=2
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=13,23
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>R - Reality is governed by ten aspects: Life, Water, Thunder, Earth, Fire, Darkness, Light, Air, Ice, and Existence. A Guardian may exist for each of these, governing a world associated with each element. The exception is Norsula, in which Fire and Water are combined into one. The conflict between the Guardians is the greatest in this world, where unending war ravages the deep oceans to the high mountains and every being within is a soldier.

In contrast, Ethea, the world of Life is usually the most peaceful, with Irdya of Earth as a close second. Of the remaining worlds, Yrathid, the world of Darkness, is home to the youngest Guardian, who often lets the mightier demon lords on her world direct their respective denizens. There does not yet exist a Guardian governing the aspect of Existence.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=2
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=3
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=13,21
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>T - Terror. Fear is the origin of life and progress, but also the force that limits growth. For most creatures, the greatest terror is from the sea of vast and all-consuming war. The fear of insignificance and death, being cast away as trifling lives without meaning, this is what plagues the lesser creatures.

We Guardians are different. For us, it is the burden of being the caretakers of the new world, to safeguard the rebirthed universe after the catastrophe that destroyed our predecessors, the First Gods. As calamities continue to ravage our worlds, there may come a time when our worlds turn in on themselves and disintegrate into the void. In each Guardian's interest to achieve the greatest power for their own element, they often neglect the others, perpetuating unnecessary conflict.</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=3
            [/variable]
            [then]
                [set_variable]
                    name=glyph_counter
                    value=4
                [/set_variable]
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=3,23
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>H - Hopelessness is the deciding factor. To us, it is the knowledge that we might be doomed, like the First Gods. If, in the end, fate deems that we will all be destroyed why trying to progress in the first place? Must we suffer through staring into the jaws of impending annihilation?

No. We can avoid it. Not through peace and stability, because those cannot last for long, but by gaining power through progress - finding a way to obtain strength surpassing that of the Yarae and the First Gods. If we are stronger, it is presumed, we will also gain the capacity to survive when the foretold judgment day comes. Progress, and power. The question is, how does one obtain these things?</i>"
        [/message]

        [if]
            [variable]
                name=glyph_counter
                numerical_equals=4
            [/variable]
            [then]
                [terrain]
                    x=8
                    y=17-18
                    terrain=Qxe^Bs|
                [/terrain]
                [terrain]
                    x=7,9
                    y=17-18,17-18
                    terrain=Qxe
                [/terrain]
                [redraw]
                    clear_shroud=yes
                [/redraw]
                [message]
                    speaker=Esther
                    message= _ "We did it!"
                [/message]
                [message]
                    speaker=Aryel
                    message= _ "Talk about a lot of information. Too bad it was mostly useless, since it was all so vague. Wish these Guardians would learn to be more helpful, but figures they'd never tell us anything."
                [/message]
                [message]
                    speaker=Esther
                    message= _ "(<i>whispers</i>) Well, it's all we've got while Xia'el isn't here."
                [/message]
                [message]
                    speaker=Aryel
                    message= _ "(<i>whispers</i>) Not like she's going to show up anyway. All these demons are crawling around and she's still not here to do anything about it. She can jabber on all she wants about being protective and whatnot, but it's useless until she acts on it."
                [/message]
                [message]
                    speaker=Esther
                    message= _ "(<i>whispers</i>) Yes, well maybe the time will come when she'll prove us wrong. (<i>looks up</i>) Don't be so quick to judge, there's still a lot more to explore!"
                [/message]

                [store_unit]
                    [filter]
                        id=Esther
                    [/filter]
                    variable=esther
                [/store_unit]
                [store_unit]
                    [filter]
                        id=Yumi
                    [/filter]
                    variable=yumi
                [/store_unit]
                [store_unit]
                    [filter]
                        id=Aryel
                    [/filter]
                    variable=aryel
                [/store_unit]

                #ifdef EASY
                {VARIABLE_OP esther.experience add 200}
                {VARIABLE_OP yumi.experience add 200}
                {VARIABLE_OP aryel.experience add 200}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+200 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif
                #ifdef NORMAL
                {VARIABLE_OP esther.experience add 150}
                {VARIABLE_OP yumi.experience add 150}
                {VARIABLE_OP aryel.experience add 150}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+150 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif
                #ifdef HARD
                {VARIABLE_OP esther.experience add 75}
                {VARIABLE_OP yumi.experience add 75}
                {VARIABLE_OP aryel.experience add 75}

                [unstore_unit]
                    variable=esther
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=yumi
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                [unstore_unit]
                    variable=aryel
                    find_vacant=no
                    text= _ "+75 XP"
                    red,green,blue=255,0,255
                [/unstore_unit]
                #endif

                {CLEAR_VARIABLE esther}
                {CLEAR_VARIABLE yumi}
                {CLEAR_VARIABLE aryel}

                [objectives]
                    {OBJECTIVE_VICTORY  ( _ "Explore")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
                    {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
                    {OBJECTIVE_FULL_CARRYOVER}
                [/objectives]
                [set_variable]
                    name=blue_spawns
                    value=0
                [/set_variable]
                [set_variable]
                    name=black_spawns
                    value=1
                [/set_variable]
                {SPAWN ("Demon Voidreaver") 3 12 5}
            [/then]
            [else]
                [set_variable]
                    name=glyph_counter
                    value=0
                [/set_variable]
            [/else]
        [/if]
    [/event]


    [event]
        name=sighted
        first_time_only=yes
        [filter]
            side=3
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [message]
            speaker=Esther
            message= _ "Oh dear, what are those things?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>eyes narrowed</i>) Their appearance is kind of like demons, but their energies are somewhat like the undead. Kind of, but just... emptier."
        [/message]
        [message]
            speaker=Esther
            message= _ "Whatever they are, they seem to be very powerful especially around the chasm. We should get away from here as soon as possible."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x,y=35,11
            side=1
        [/filter]

        [message]
            speaker=narrator
            message= _ "<i>Beyond the flesh, what else is needed for life? The mind and soul? The essence? The bridge between the inanimate and the sentient is brought about by the aspects. Sentience is formed from the combination of the elements, but only special souls are possessed of essence itself.</i>"
        [/message]
        {DELAY 750}
        [terrain]
            x=34,35,36
            y=11,12,11
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 450}
        [message]
            speaker=Esther
            message= _ "Another puzzle. (<i>whispers</i>) Looks like something related to us. Matching our 'essence', is that what it is?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>frowns</i>) Seems like it."
        [/message]
        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Solve the puzzle")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
            {OBJECTIVE_NOTE ( _ "To solve the puzzle, you need to have three units on the correct locations simultaneously.")}
        [/objectives]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... cold. I feel... numb..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's thick and sticky, almost like blood."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,15
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... so bright."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            side=1
            [and]
                [not]
                    id=Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "Something about this tree feels comforting."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            side=1
            [and]
                [not]
                    id=Aryel,Esther
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "It's... so warm..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,17
            side=1
            [and]
                [not]
                    id=Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "..."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>stares at reflection</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,13
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "Cold and frigid, like death. Ah, how wonderful."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>draws circles in water</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,13
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "(<i>sips at water</i>) Strange. This water tastes like blood."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,15
            id=Yumi,Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "(<i>squints</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>looks at Aryel</i>)"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Yumi
            message= _ "(<i>steps back</i>)"
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,15
            id=Aryel
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Aryel
            message= _ "There's something weird about this tree. The sensation from it is really intense... something about it resonates with my body."
        [/message]
        [if]
            [have_unit]
                x,y=42,17
                id=Esther
            [/have_unit]
            [and]
                [have_unit]
                    x,y=28,17
                    id=Yumi
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=42,17
            id=Esther
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=Esther
            message= _ "This fire is unlike anything I've ever felt before. It's warm and comforting, not hot, and it pulsates, almost like a heartbeat."
        [/message]
        [if]
            [have_unit]
                x,y=28,15
                id=Aryel
            [/have_unit]
            [and]
                [have_unit]
                    x,y=28,17
                    id=Yumi
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x,y=28,17
            id=Yumi
        [/filter]
        [filter_condition]
            [variable]
                name=puzzle_done
                numerical_equals=0
            [/variable]
        [/filter_condition]

        [message]
            speaker=Yumi
            message= _ "(<i>stares</i>)"
        [/message]

        [if]
            [have_unit]
                x,y=28,15
                id=Aryel
            [/have_unit]
            [and]
                [have_unit]
                    x,y=42,17
                    id=Esther
                [/have_unit]
            [/and]
            [then]
                [fire_event]
                    name=puzzle_complete
                [/fire_event]
            [/then]
        [/if]
    [/event]

    [event]
        name=puzzle_complete

        [terrain]
            x=35
            y=20-21
            terrain=Qxe^Bs|
        [/terrain]
        [terrain]
            x=34,36
            y=20-21,20-21
            terrain=Qxe
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}

        [message]
            speaker=Esther
            message= _ "Hmm, there's a bridge there now. That was... interesting."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) The puzzle only activated for us. You know what this means, right? (<i>looks at Yumi</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>shivers</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) They have their eyes on us."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) That's if they know."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) There's no way they don't."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) There's no way Xia'el doesn't, I agree. But I can't imagine how the others might have found out. Though, even if they have, I wonder if that'll end up being a problem?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Of course it is! They'll use us like pigs, eating up our power for their own purposes."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Even Xia'el? You don't think she's trustworthy?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Are any of them?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Well, I think that at least she'd try to make an effort to protect us, if anyone. Besides, we've managed fine so far on our own. No need to be so nervous Sheesh, I think Yumi's rubbing off on you."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) We won't be fine if more of them come!"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Relax. Don't be so nervous. Sheesh, I think Yumi's rubbing off on you."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Well... I don't know. That actually might be true. <i>I can't help but feel nervous, the way she's acting...</i>"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>sulks</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) We'll have to talk about this later. When less people are around."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>glances at Yumi</i>) Right."
        [/message]

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]

        #ifdef EASY
        {VARIABLE_OP esther.experience add 200}
        {VARIABLE_OP yumi.experience add 200}
        {VARIABLE_OP aryel.experience add 200}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+200 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif
        #ifdef NORMAL
        {VARIABLE_OP esther.experience add 150}
        {VARIABLE_OP yumi.experience add 150}
        {VARIABLE_OP aryel.experience add 150}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+150 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif
        #ifdef HARD
        {VARIABLE_OP esther.experience add 75}
        {VARIABLE_OP yumi.experience add 75}
        {VARIABLE_OP aryel.experience add 75}

        [unstore_unit]
            variable=esther
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=yumi
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        [unstore_unit]
            variable=aryel
            find_vacant=no
            text= _ "+75 XP"
            red,green,blue=255,0,255
        [/unstore_unit]
        #endif

        {CLEAR_VARIABLE esther}
        {CLEAR_VARIABLE yumi}
        {CLEAR_VARIABLE aryel}

        [set_variable]
            name=black_spawns
            value=0
        [/set_variable]
        [set_variable]
            name=puzzle_done
            value=1
        [/set_variable]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x=34-38
            y=24-26
            side=1
        [/filter]

        [message]
            speaker=Esther
            message= _ "Here's a keep. And the air is getting warmer."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>eyes narrowed</i>) That means demons."
        [/message]
        [message]
            speaker=Esther
            message= _ "We should be on guard. Everyone, stick together and don't get separated!"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) They're totally after us. The demons. That's the only reason they would've shown up here so quickly."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>whispers</i>) Even if they are, so what? It's not like we're going to run away now. You of all people wouldn't shy away from a fight, right?"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>whispers</i>) Hah. I guess not."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=32-33
            y=28
            [and]
                [not]
                    id=Esther,Aryel,Yumi
                [/not]
                [not]
                    race=undead
                [/not]
            [/and]
        [/filter]
        [filter_condition]
            [variable]
                name=wall_open
                numerical_equals=0
            [/variable]
        [/filter_condition]
        [message]
            speaker=unit
            message= _ "I can't get past this."
        [/message]
    [/event]

    [event]
        name=moveto
        first_time_only=yes
        [filter]
            x=32-33
            y=28
            id=Esther,Aryel,Yumi
        [/filter]

        [terrain]
            x=31-33,34
            y=29,28
            terrain=Uue
        [/terrain]
        [redraw]
            clear_shroud=yes
        [/redraw]

        {DELAY 500}
        [message]
            speaker=Esther
            message= _ "Hmm. Do you guys hear something?"
        [/message]
        {REPEAT 2 ({QUAKE_FIXED "rumble.ogg"})}
        [message]
            speaker=Aryel
            message= _ "Uh."
        [/message]
        {REPEAT 2 ({QUAKE_FIXED "rumble.ogg"})}
        [message]
            speaker=Esther
            message= _ "Not good."
        [/message]
        {REPEAT 3 ({QUAKE_FIXED "rumble.ogg"})}

        [remove_shroud]
            side=1
            x=19-44
            y=30-41
        [/remove_shroud]
        [lift_fog]
            [filter_side]
                side=1
            [/filter_side]
            x=19-44
            y=30-41
            multiturn=yes
        [/lift_fog]

        [scroll_to]
            x,y=21,33
        [/scroll_to]
        [unit]
            side=4
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l4
            random_gender=yes
            x,y=21,33
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=20,38
        [/scroll_to]
        [unit]
            side=5
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l5
            random_gender=yes
            x,y=20,38
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=43,40
        [/scroll_to]
        [unit]
            side=6
            type=Demon Zephyr
            animate=yes
            canrecruit=yes
            id=s5l6
            random_gender=yes
            x,y=43,40
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=43,34
        [/scroll_to]
        [unit]
            side=7
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l7
            random_gender=yes
            x,y=43,34
        [/unit]
        {DELAY 500}

        [scroll_to]
            x,y=36,25
        [/scroll_to]
        [unit]
            side=8
            type=Demon Grunt
            animate=yes
            canrecruit=yes
            id=s5l8
            random_gender=yes
            x,y=36,25
        [/unit]
        {DELAY 500}

        [message]
            speaker=Aryel
            message= _ "So, Esther, not an invasion, huh."
        [/message]
        [message]
            speaker=Esther
            message= _ "Don't be so scared. It looks like they're mostly just small fry."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Pff. I'm not scared for me."
        [/message]
        [message]
            speaker=Esther
            message= _ "<i>For Yumi, huh.</i> Alright, well let's take them down quickly before they make any trouble."
        [/message]

        [modify_side]
            [filter_side]
                side=4-8
            [/filter_side]
            #ifdef HARD
                gold=200
            #endif
            #ifdef NORMAL
                gold=140
            #endif
            #ifdef EASY
                gold=110
            #endif
        [/modify_side]
        [modify_turns]
            value=-1
        [/modify_turns]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Defeat all enemy leaders")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]

        [set_variable]
            name=wall_open
            value=1
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=1
        [/set_variable]
    [/event]

    [event]
        name=new turn
        first_time_only=no
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_not_equals=0
            [/variable]
        [/filter_condition]
        {VARIABLE_OP turn_counter add 1}
    [/event]

    [event]
        name=side 1 turn
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_equals={ON_DIFFICULTY 9 8 7}
            [/variable]
        [/filter_condition]

        [unit]
            side=4
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l4_2
            random_gender=yes
            x,y=21,33
            placement=map
            passable=yes
        [/unit]
        [unit]
            side=5
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l5_2
            random_gender=yes
            x,y=20,38
            placement=map
            passable=yes
        [/unit]
        [unit]
            side=6
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l6_2
            random_gender=yes
            x,y=43,40
            placement=map
            passable=yes
        [/unit]
        [unit]
            side=7
            type=Demon Stormbringer
            animate=yes
            canrecruit=yes
            id=s5l7_2
            random_gender=yes
            x,y=43,34
            placement=map
            passable=yes
        [/unit]
        [unit]
            side=8
            type=Demon Grunt
            animate=yes
            canrecruit=yes
            id=s5l8_2
            random_gender=yes
            x,y=36,25
            placement=map
            passable=yes
        [/unit]

        [message]
            speaker=Aryel
            message= _ "(<i>pant</i>) They keep coming... (<i>pant</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "Just... keep fighting."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>takes a deep breath</i>) Esther, I don't think-"
        [/message]
        [message]
            speaker=Esther
            message= _ "What else can we do? If we don't hold them here, they'll follow us out into the city and all of the humans will be in trouble. And before you say anything, that's a terrible thing to let happen."
        [/message]
        [message]
            speaker=Aryel
            message= _ "I wasn't about to suggest that! Even I'm not that mean. Don't you worry, I still have plenty of fight left in me."
        [/message]

        [objectives]
            {OBJECTIVE_VICTORY  ( _ "Survive")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Yumi")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Esther")}
            {OBJECTIVE_DEFEAT  ( _ "Death of Aryel")}
            {OBJECTIVE_FULL_CARRYOVER}
        [/objectives]

        [modify_side]
            [filter_side]
                side=4-8
            [/filter_side]
            #ifdef HARD
                gold=250
            #endif
            #ifdef NORMAL
                gold=175
            #endif
            #ifdef EASY
                gold=150
            #endif
        [/modify_side]
    [/event]

    [event]
        name=side 1 turn
        [filter_condition]
            [variable]
                name=turn_counter
                numerical_equals=11
            [/variable]
        [/filter_condition]


        {SPAWN_ID ("Demon Stromguarde") 7 33 32 ("demonboss") ("male")}
        {SPAWN ("Demon Stromguarde") 7 31 32}
        {SPAWN ("Demon Stromguarde") 7 35 32}
        {SPAWN ("Demon Stromguarde") 5 31 38}
        {SPAWN ("Demon Stromguarde") 5 33 38}
        {SPAWN ("Demon Stromguarde") 5 35 38}

        [message]
            speaker=Esther
            message= _ "Oh dear..."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>steps back</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Well... they brought some pretty tough guys, huh. Not sure how we're gonna make it out of this one, ladies."
        [/message]
        [message]
            speaker=Esther
            message= _ "Ugh. Well... here, listen. Aryel, maybe you can take Yumi and get out of here. I can probably hold them-"
        [/message]
        [message]
            speaker=narrator
            message= _ "<i>That won't be necessary</i>"
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>eyes narrow</i>)"
        [/message]
        {DELAY 750}

        [unit]
            type=Guardian of Earth
            id=Xia'el
            name=_"Xia'el"
            x,y=33,35
            animate=yes
            side=9
            random_traits=no
        [/unit]

        [message]
            speaker=Xia'el
            message= _ "I really have to say, I'm surprised. Uria usually controls her subjects much better than this. What has gotten into you all?"
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>remains silent</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Nothing to say? As much as I hate to do it, there has to be some punishment for invading my world like this. I'm not going to just tell you to get out and leave it at that."
        [/message]
        [message]
            speaker=demonboss
            message= _ "(<i>grits teeth</i>) ... tell her... nothing!"
        [/message]

        [kill]
            type=Demon Stromguarde
            animate=yes
        [/kill]

        [message]
            speaker=Xia'el
            message= _ "Wait- hmm. That was unexpected. Now why would they do such a thing?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Lady Guardian, we, erm-"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Just call me Xia'el, dear."
        [/message]
        [message]
            speaker=Esther
            message= _ "Right. We've encountered these demons before, and they might not be under Uria's command."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "I'm well aware. Hold that thought for a moment."
        [/message]

        {WHITE_SCREEN}
        {DELAY 250}
        {PLAY_SOUND "magic-faeriefire.ogg"}
        [kill]
            side=2,3,4,5,6,7,8
            animate=yes
        [/kill]
        {DELAY 250}
        {UNWHITE_SCREEN}
        {DELAY 750}

        [message]
            speaker=Xia'el
            message= _ "It pains me to do such a thing, but their minds have already been warped beyond repair. It is better to put them out of their misery."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>looks at Aryel</i>) <i>See, she did show up after all.</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>For like five minutes. I still don't trust her.</i>"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Right, now that that's taken care of, I need to have a word with you three. Away from everyone else. Is that okay?"
        [/message]
        [message]
            speaker=Esther
            message= _ "Of course."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Good."
        [/message]

        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Esther
        [/kill]
        [unstore_unit]
            variable=esther
            x,y=32,45
        [/unstore_unit]
        {CLEAR_VARIABLE esther}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Aryel
        [/kill]
        [unstore_unit]
            variable=aryel
            x,y=33,46
        [/unstore_unit]
        {CLEAR_VARIABLE aryel}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Yumi
        [/kill]
        [unstore_unit]
            variable=yumi
            x,y=31,46
        [/unstore_unit]
        {CLEAR_VARIABLE yumi}

        {DELAY 500}

        [store_unit]
            [filter]
                id=Xia'el
            [/filter]
            variable=xiael
        [/store_unit]
        {PLAY_SOUND "lightning.ogg"}
        [kill]
            id=Xia'el
        [/kill]
        [unstore_unit]
            variable=xiael
            x,y=32,47
        [/unstore_unit]
        {CLEAR_VARIABLE xiael}

        [redraw]
            clear_shroud=yes
        [/redraw]
        [scroll_to]
            x,y=32,47
        [/scroll_to]

        {DELAY 500}

        [message]
            speaker=Esther
            message= _ "Wow, the energy in here is amazing. So this is what we were feeling out there. Where are we?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "A very secret place that is not meant for humans or even faerie to know about. This is why I had your friend here help me seal it off all those years ago."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Oh, so I probably should have left it closed? Whoops, haha."
        [/message]
        [message]
            speaker=Esther
            message= _ "So you do know what we are."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Of course. I've been watching you three for a very long time. Realize that the other Guardians have been as well. Some of them view the rarity of your kind as a sort of prize."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>tilts head</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Confused?"
        [/message]
        [message]
            speaker=Esther
            message= _ "She's a lot younger than us. We might need to explain things in a little more detail so she knows what's going on."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Of course. I assume you are aware of the Guardians and their function in our universe?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods slowly</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Rather shy, aren't you? There's no need to be afraid. (<i>smiles encouragingly</i>)"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>bites lip</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "<i>Hmm, she's weird. I thought she was like the other two but there's something different about her.</i>"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "(<i>clears throat</i>) This is something all three of you need to hear. Fae like yourselves possess powers that are similar to our own. I am not referring to the scale or magnitude of what you can accomplish, but the nature of what you are. I can imagine that some of the other Guardians might be interested in such a thing, but I'm not sure exactly what they want to do with your power, nor how they would try to harness it."
        [/message]
        [message]
            speaker=Esther
            message= _ "The other Guardians? This time, we've only been attacked by demons from Ethea so far. But Uria wouldn't be after us, right?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Correct, she is not. There are circumstances on Ethea that are troubling her right now, enough so that she could not come to restrain these renegades."
        [/message]
        [message]
            speaker=Aryel
            message= _ "These obviously aren't just your ordinary rebellious demons, though. They're clearly being controlled, like... by their brains! (<i>waves hands around</i>)"
        [/message]
        [message]
            speaker=Esther
            message= _ "<i>Aryel is so weird sometimes too...</i>"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "That is correct as well. Perhaps this is the work of a powerful demon lord, or perhaps another Guardian... Valdir, Yukiria, maybe Merthiaal."
        [/message]
        [message]
            speaker=Esther
            message= _ "The Guardians of Water, Ice, and Darkness, Yumi. A bunch of creepers, basically."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "They all have their own reasons. Valdir relishes battle and Yukiria is an expert at manipulation. I suppose that Valdir is always looking for advantages in his battle with Shardia, the Guardian of Fire. Those two are always at each others' throats. Merthiaal, she's hard to read, but controlling other demons is in her realm of prowess. Though, I can't imagnie why she would want to do that. She's very shy and passive most of the time."
        [/message]
        [message]
            speaker=Esther
            message= _ "So, then Yukiria or Valdir?"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "They both have distinct powers and neither would be likely to have a direct hand in this affair. It must be done through a lackey."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>looks at Yumi</i>) But that still begs the question of why they are coming after us. And I don't mean why they're interested in our powers. I mean how they want to use us. It's not like we're just going to fight for them willingly."
        [/message]
        [message]
            speaker=Xia'el
            message= _ "You three, as fae, are not physical creatures. You are inherently composed of magic. I suspect there may be a way to indirectly utilize that power, even if it does not reside in their original being. And before you ask, while that sounds similar to you being elementals, you clearly are not."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Yeah, we know that much. It's whatever that difference is that's bugging me. Like..."
        [/message]
        [message]
            speaker=Esther
            message= _ "<i>We don't exactly understand what we are. We just know that we're not normal creatures.</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "<i>Would it be a good idea to tell her that?</i>"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Unfortunately, I am not really able to answer that. I do not know the answer, but it is not out of the question that another Guardian might."
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>frowns</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "(<i>glances at Yumi</i>) <i>She knows much more than she lets on. Something's not quite right about her.</i>"
        [/message]
        [message]
            speaker=Aryel
            message= _ "So that's it then? That's all you wanted to tell us? (<i>huffs</i>)"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "(<i>laughs</i>) In time, I will let you know more. Knowledge is a burden. We Guardians are troubled with more than you know."
        [/message]
        [message]
            speaker=Aryel
            message= _ "Right, is that why you were gone for so long? Where did you go? Why weren't you here to-"
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>puts a hand over Aryel's mouth</i>) Don't be rude! She's a-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>blushes</i>) I didn't mean to sound like that. It's just-"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "No, it's quite alright. I know that it is hard for you to fend for yourselves. I must apologize. But it is a necessity for me to continue to maintain reasonable relations with the other Guardians, and our personal intervention is usually seen as unnecessary meddling. I will try to protect you when I can, but please, don't do anything reckless. I have all of Irdya to consider as well."
        [/message]
        [message]
            speaker=Esther
            message= _ "(<i>looks at Aryel</i>) Of course. We'll just hang out here. Explore Caerleon a bit or something. Right, girls?"
        [/message]
        [message]
            speaker=Yumi
            message= _ "(<i>nods</i>)"
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>sighs</i>) Right. <i>See? She's so reluctant to lift a finger and help us when she totally could.</i>"
        [/message]
        [message]
            speaker=Xia'el
            message= _ "Glad to hear it. <i>I will have to keep an eye on those two. One seems reckless, and the other... I can't read her at all. Maybe she's not exactly what I originally thought she was.</i>"
        [/message]
        [kill]
            id=Xia'el
        [/kill]

        [endlevel]
            result=victory
            {NEW_GOLD_CARRYOVER 100}
            next_scenario=06_Caerleon
        [/endlevel]
    [/event]


    [event]
        name=victory

        {CLEAR_VARIABLE turn_counter}
        {CLEAR_VARIABLE wall_open}
        {CLEAR_VARIABLE puzzle_done}
        {CLEAR_VARIABLE door_open}
        {CLEAR_VARIABLE glyph_counter}
        {CLEAR_VARIABLE blue_spawns}
        {CLEAR_VARIABLE black_spawns}
    [/event]

    [event]
        name=last breath
        [filter]
            id=guardsman
        [/filter]

        [message]
            speaker=guardsman
            message= _ "I knew... opening this place... was a bad idea-"
        [/message]
        [message]
            speaker=Aryel
            message= _ "Fool. He should've stayed back and let me do the fighting for him. Now the idiot's dead. But, maybe I can still make use of him..."
        [/message]
        [message]
            speaker=Esther
            message= _ "Aryel, I don't think the humans would appreciate that..."
        [/message]
        [message]
            speaker=Aryel
            message= _ "(<i>shrugs</i>) Oh, fine, have it your way."
        [/message]
    [/event]
    [event]
        name=time over

        [store_unit]
            [filter]
                id=Yumi
            [/filter]
            variable=yumi
        [/store_unit]
        [store_unit]
            [filter]
                id=Esther
            [/filter]
            variable=esther
        [/store_unit]
        [store_unit]
            [filter]
                id=Aryel
            [/filter]
            variable=aryel
        [/store_unit]
        {FLASH_RED_EXTREME ({DELAY 500})}

        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss1") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss2") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $yumi.x $yumi.y ("boss3") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss4") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss5") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $esther.x $esther.y ("boss6") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss7") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss8") ("male")}
        {SPAWN_ID ("Demon Stromguarde") 2 $aryel.x $aryel.y ("boss9") ("male")}

        {CLEAR_VARIABLE yumi}
        {CLEAR_VARIABLE esther}
        {CLEAR_VARIABLE aryel}

        [message]
            speaker=boss1
            message= _ "... slay... them all..."
        [/message]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]

#undef GENERATE_CAVE_HILL
#undef GENERATE_CAVE_HILL
#undef GENERATE_FUNGUS
#undef GENERATE_CAVE_PATH
#undef GENERATE_CAVE
#undef GENERATE_FUNGUS
